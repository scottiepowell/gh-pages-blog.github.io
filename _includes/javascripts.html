<!-- JS -->
<script src="{{site.baseurl}}/assets/js/jquery-3.2.1.min.js"></script>
<script src="{{site.baseurl}}/assets/js/jekyll-search.js"></script>
<script src="{{site.baseurl}}/assets/js/infinite-jekyll.js"></script>
<script src="{{site.baseurl}}/assets/js/main.js"></script>
<script>
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '{{site.baseurl}}/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{description}">{title}</a></li>',
    noResultsText: 'No results found',
    fuzzy: false,
    exclude: ['Welcome']
  });

{% if page.layout == "post" %}
if (document.getElementById('comment-curtain') == null){
  document.getElementById('disqus_thread').classList.toggle('show')
}
function toggle_comments(){
    document.getElementById('comment-curtain').classList.toggle('hide')
    document.getElementById('disqus_thread').classList.toggle('show')
}
$(".share-hover").on("mouseover", function() {
  document.getElementById('sidebar-icons').classList.add('show');
  setTimeout(function () {
      document.getElementById('sidebar-icons').classList.add('opaque');
      document.getElementById('sidebar-icons').classList.remove('transparent');
  }, 10);
}).on("mouseleave", function() {
  document.getElementById('sidebar-icons').classList.add('transparent');
  document.getElementById('sidebar-icons').classList.remove('opaque');
  document.getElementById('sidebar-icons').addEventListener('transitionend', function(e) {
    document.getElementById('sidebar-icons').classList.remove('show');
  }, {capture: false, once: true, passive: false});
});
{% endif %}
{% if page.toc %}
var spy = new Gumshoe("#toc-content a", {
                        navClass:"active",
                        contentClass:"underline",
                        nested:0,
                        nestedClass:"active",
                        offset:20,
                        reflow:1,
                        events:1});

var coll = document.getElementsByClassName("toc-item-1");
var i;

var chevron_up = "<svg aria-hidden=\"true\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 256 512\"><path fill=\"currentColor\" d=\"M136.5 185.1l116 117.8c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L128 224.7 27.6 326.9c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17l116-117.8c4.7-4.6 12.3-4.6 17 .1z\"></path></svg>"
var chevron_down = "<svg aria-hidden=\"true\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 256 512\"><path fill=\"currentColor\" d=\"M119.5 326.9L3.5 209.1c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0L128 287.3l100.4-102.2c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L136.5 327c-4.7 4.6-12.3 4.6-17-.1z\"></path></svg>"

for (i = 0; i < coll.length; i++) {
  if (coll[i].childElementCount > 1) {
    sign = document.createElement('div');
    sign.className = "toc-sign";
    sign.innerHTML = chevron_down;
    coll[i].insertBefore(sign, coll[i].childNodes[0].nextSibling);
    coll[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var content = this.lastElementChild;
        if (content.style.maxHeight){
          content.style.maxHeight = null;
          this.firstElementChild.nextSibling.innerHTML = chevron_down;
        } else {
          content.style.maxHeight = content.scrollHeight + "px";
          this.firstElementChild.nextSibling.innerHTML = chevron_up;
        }
    });
  }
}
{% endif %}
$(document).ready(function() {
  'use strict';
  /* -------- Scroll to top button ------- */
  $(".top").click(function() {
    $("html, body")
      .stop()
      .animate({ scrollTop: 0 }, "slow", "swing");
  });
  $(window).scroll(function() {
    if ($(this).scrollTop() > $(window).height()) {
      $(".top").addClass("is-active");
    } else {
      $(".top").removeClass("is-active");
    }
  });
});
</script>
